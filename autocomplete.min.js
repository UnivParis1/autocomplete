!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).autocomplete=t()}(this,(function(){"use strict";return function(e){var t=document,n=e.container||t.createElement("div");n.id=n.id||"autocomplete-"+b();var i,o,r=n.style,a=e.debounceWaitMs||0,s=e.preventSubmit||!1,u=e.disableAutoSelect||!1,c=n.parentElement,d=[],l="",f=2,p=e.showOnFocus,v=0;if(void 0!==e.minLength&&(f=e.minLength),!e.input)throw new Error("input undefined");var m=e.input;function b(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function g(){o&&window.clearTimeout(o)}function h(){return!!n.parentNode}function E(){var e;v++,d=[],l="",i=void 0,m.setAttribute("aria-activedescendant",""),m.setAttribute("aria-expanded","false"),(e=n.parentNode)&&e.removeChild(n)}function w(){n.innerHTML="",m.setAttribute("aria-activedescendant","");var o=function(e,n,i){var o=t.createElement("div");return o.textContent=e.label||"",o};e.render&&(o=e.render);var a=function(e,n){var i=t.createElement("div");return i.textContent=e,i};e.renderGroup&&(a=e.renderGroup);var s=t.createDocumentFragment(),u=b();if(d.forEach((function(t,r){if(t.group&&t.group!==u){u=t.group;var c=a(t.group,l);c&&(c.className+=" group",s.appendChild(c))}var d=o(t,l,r);d&&(d.id=n.id+"_"+r,d.setAttribute("role","option"),d.addEventListener("click",(function(n){e.onSelect(t,m),E(),n.preventDefault(),n.stopPropagation()})),t===i&&(d.className+=" selected",d.setAttribute("aria-selected","true"),m.setAttribute("aria-activedescendant",d.id)),s.appendChild(d))})),n.appendChild(s),d.length<1){if(!e.emptyMsg)return void E();var f=t.createElement("div");f.id=n.id+"_"+b(),f.className="empty",f.textContent=e.emptyMsg,n.appendChild(f),m.setAttribute("aria-activedescendant",f.id)}n.parentNode||(c||t.body).appendChild(n),function(){if(h()){m.setAttribute("aria-expanded","true"),r.height="auto",r.width=m.offsetWidth+"px";var i,o=0;a(),a(),e.customize&&i&&e.customize(m,i,n,o)}function a(){var e=t.documentElement,n=e.clientTop||t.body.clientTop||0,a=e.clientLeft||t.body.clientLeft||0,s=window.pageYOffset||e.scrollTop,u=window.pageXOffset||e.scrollLeft,c=(i=m.getBoundingClientRect()).top+m.offsetHeight+s-n,d=i.left+u-a;r.top=c+"px",r.left=d+"px",(o=window.innerHeight-(i.top+m.offsetHeight))<0&&(o=0),r.top=c+"px",r.bottom="",r.left=d+"px",r.maxHeight=o+"px"}}(),function(){var e=n.getElementsByClassName("selected");if(e.length>0){var t=e[0],i=t.previousElementSibling;if(i&&-1!==i.className.indexOf("group")&&!i.previousElementSibling&&(t=i),t.offsetTop<n.scrollTop)n.scrollTop=t.offsetTop;else{var o=t.offsetTop+t.offsetHeight,r=n.scrollTop+n.offsetHeight;o>r&&(n.scrollTop+=o-r)}}}()}function A(){h()&&w()}function L(){A()}function x(e){e.target!==n?A():e.preventDefault()}function y(){N(0)}function T(e,t){var n,o=h();if("Escape"===t)E();else{if(!o||d.length<1)return;"ArrowUp"===t?(n=d.indexOf(i),i=-1===n?void 0:d[(n+d.length-1)%d.length]):function(){var e=d.indexOf(i);i=d.length<1?void 0:-1===e?d[0]:d[(e+1)%d.length]}(),w()}e.preventDefault(),o&&e.stopPropagation()}function k(t){var n=t.key;switch(n){case"ArrowUp":case"ArrowDown":case"Escape":T(t,n);break;case"Enter":!function(t){i&&(e.onSelect(i,m),E()),s&&t.preventDefault()}(t)}}function C(){p&&N(1)}function N(t){var n=++v,r=m.value,s=m.selectionStart||0;r.length>=f||1===t?(g(),o=window.setTimeout((function(){e.fetch(r,(function(e){v===n&&e&&(l=r,i=(d=e).length<1||u?void 0:d[0],w())}),t,s)}),0===t||2===t?a:0)):E()}function D(t){e.keyup?e.keyup({event:t,fetch:function(){return N(0)}}):h()||"ArrowDown"!==t.key||N(0)}function S(t){e.click&&e.click({event:t,fetch:function(){return N(2)}})}function H(){setTimeout((function(){t.activeElement!==m&&E()}),200)}return n.className="autocomplete "+(e.className||""),n.setAttribute("role","listbox"),m.setAttribute("role","combobox"),m.setAttribute("aria-expanded","false"),m.setAttribute("aria-autocomplete","list"),m.setAttribute("aria-controls",n.id),m.setAttribute("aria-owns",n.id),m.setAttribute("aria-activedescendant",""),m.setAttribute("aria-haspopup","listbox"),r.position="absolute",n.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),n.addEventListener("focus",(function(){return m.focus()})),m.addEventListener("keyup",D),m.addEventListener("click",S),m.addEventListener("keydown",k),m.addEventListener("input",y),m.addEventListener("blur",H),m.addEventListener("focus",C),window.addEventListener("resize",L),t.addEventListener("scroll",x,!0),{destroy:function(){m.removeEventListener("focus",C),m.removeEventListener("keyup",D),m.removeEventListener("click",S),m.removeEventListener("keydown",k),m.removeEventListener("input",y),m.removeEventListener("blur",H),window.removeEventListener("resize",L),t.removeEventListener("scroll",x,!0),m.removeAttribute("role"),m.removeAttribute("aria-expanded"),m.removeAttribute("aria-autocomplete"),m.removeAttribute("aria-controls"),m.removeAttribute("aria-activedescendant"),m.removeAttribute("aria-owns"),m.removeAttribute("aria-haspopup"),g(),E()}}}}));
//# sourceMappingURL=autocomplete.min.js.map
